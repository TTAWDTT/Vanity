{% extends 'generator/base.html' %}

{% block title %}ç”Ÿæˆç»“æœ - Vanity{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ‰ ç”Ÿæˆå®Œæˆï¼</h1>
    <p>ä¸ºæ‚¨ç²¾å¿ƒç”Ÿæˆäº†5æ¡{{ content_request.get_style_display }}é£æ ¼çš„æ–‡æ¡ˆ</p>
</div>

<!-- è¯·æ±‚ä¿¡æ¯æ‘˜è¦ -->
<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">ğŸ“‹ æ‚¨çš„éœ€æ±‚</h5>
        <div class="row">
            <div class="col-md-6">
                <p><strong>å†…å®¹é£æ ¼ï¼š</strong>{{ content_request.get_style_display }}</p>
                <p><strong>è¯­è¨€ï¼š</strong>{{ content_request.get_language_display }}</p>
                <p><strong>å—ä¼—ç±»å‹ï¼š</strong>{{ content_request.audience_type }}</p>
            </div>
            <div class="col-md-6">
                {% if content_request.image %}
                <p><strong>é…å›¾ï¼š</strong>å·²ä¸Šä¼ </p>
                <div class="mb-2">
                    <img src="{{ content_request.image.url }}" alt="ä¸Šä¼ çš„å›¾ç‰‡" class="img-thumbnail" style="max-height: 100px;">
                </div>
                {% endif %}
                {% if content_request.event_description %}
                <p><strong>äº‹ä»¶æè¿°ï¼š</strong>{{ content_request.event_description|truncatechars:50 }}</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- ç”Ÿæˆçš„æ–‡æ¡ˆ -->
<div class="mb-4">
    <h3>âœ¨ ä¸ºæ‚¨ç”Ÿæˆçš„æ–‡æ¡ˆ</h3>
    <p class="text-muted">ç‚¹å‡»"å¤åˆ¶"æŒ‰é’®å¯ç›´æ¥å¤åˆ¶åˆ°å‰ªè´´æ¿</p>
</div>

{% for text_item in generated_texts %}
<div class="card mb-3">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
            <div class="flex-grow-1">
                <h6 class="card-subtitle mb-2 text-muted">æ–‡æ¡ˆé€‰é¡¹ {{ text_item.id }}</h6>
                <div class="text-content">
                    <p class="mb-0">{{ text_item.content }}</p>
                </div>
            </div>
            <button type="button" class="copy-btn ms-3" onclick="copyText('{{ text_item.content|addslashes }}')">
                ğŸ“‹ å¤åˆ¶
            </button>
        </div>
    </div>
</div>
{% empty %}
<div class="alert alert-warning">
    <h5>âš ï¸ æ²¡æœ‰ç”Ÿæˆçš„å†…å®¹</h5>
    <p>å¾ˆæŠ±æ­‰ï¼Œæ²¡æœ‰æ‰¾åˆ°ç”Ÿæˆçš„æ–‡æ¡ˆå†…å®¹ã€‚è¯·è¿”å›é‡æ–°ç”Ÿæˆã€‚</p>
</div>
{% endfor %}

<!-- æ“ä½œæŒ‰é’® -->
<div class="text-center mt-4">
    <a href="{% url 'generator:index' %}" class="btn btn-primary me-3">
        ğŸ”„ é‡æ–°ç”Ÿæˆ
    </a>
    <button type="button" class="btn btn-success" onclick="copyAllTexts()">
        ğŸ“‹ å¤åˆ¶å…¨éƒ¨æ–‡æ¡ˆ
    </button>
</div>

<!-- ä½¿ç”¨å»ºè®® -->
<div class="card mt-4">
    <div class="card-body">
        <h5 class="card-title">ğŸ’¡ ä½¿ç”¨å»ºè®®</h5>
        <div class="row">
            <div class="col-md-6">
                <h6>ğŸ“ å‘å¸ƒæŠ€å·§ï¼š</h6>
                <ul class="list-unstyled">
                    <li>â€¢ æ ¹æ®ä¸åŒå¹³å°è°ƒæ•´å†…å®¹</li>
                    <li>â€¢ å¯é€‚å½“æ·»åŠ è¯é¢˜æ ‡ç­¾</li>
                    <li>â€¢ æ³¨æ„å‘å¸ƒæ—¶é—´é€‰æ‹©</li>
                    <li>â€¢ é…åˆåˆé€‚çš„å›¾ç‰‡æ•ˆæœæ›´ä½³</li>
                </ul>
            </div>
            <div class="col-md-6">
                <h6>ğŸ¯ ä¼˜åŒ–å»ºè®®ï¼š</h6>
                <ul class="list-unstyled">
                    <li>â€¢ å¯æ ¹æ®å®é™…æƒ…å†µå¾®è°ƒæ–‡æ¡ˆ</li>
                    <li>â€¢ æ·»åŠ ä¸ªäººç‰¹è‰²å…ƒç´ </li>
                    <li>â€¢ è€ƒè™‘å—ä¼—çš„æ¥å—åº¦</li>
                    <li>â€¢ ä¿æŒå†…å®¹çš„çœŸå®æ€§</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
// å¤åˆ¶æ‰€æœ‰æ–‡æ¡ˆ
function copyAllTexts() {
    const allTexts = [
        {% for text_item in generated_texts %}
        '{{ text_item.content|addslashes }}',
        {% endfor %}
    ];
    
    const allContent = allTexts.join('\n\n---\n\n');
    
    navigator.clipboard.writeText(allContent).then(function() {
        const toast = document.createElement('div');
        toast.className = 'alert alert-success position-fixed top-0 end-0 m-3';
        toast.style.zIndex = '9999';
        toast.innerHTML = 'æ‰€æœ‰æ–‡æ¡ˆå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼';
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.remove();
        }, 3000);
    }).catch(function(err) {
        console.error('å¤åˆ¶å¤±è´¥: ', err);
        alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
    });
}

// é¡µé¢åŠ è½½å®Œæˆåçš„åŠ¨ç”»æ•ˆæœ
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.card');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
            card.style.transition = 'all 0.5s ease';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 100);
    });
});
</script>
{% endblock %}

{% block extra_css %}
<style>
.card {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.text-content {
    font-size: 1.1rem;
    line-height: 1.6;
    white-space: pre-wrap;
}

.copy-btn {
    flex-shrink: 0;
}
</style>
{% endblock %}