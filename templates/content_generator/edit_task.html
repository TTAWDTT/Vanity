<!DOCTYPE html><!DOCTYPE html><!DOCTYPE html>

<html lang="zh">

<head><html lang="zh"><html lang="zh">

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0"><head><head>

    <title>编辑任务 - Vanity</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">    <meta charset="UTF-8">    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <meta name="viewport" content="width=device-width, initial-scale=1.0">

        :root {

            /* 深色主题 */    <title>编辑任务 - Vanity</title>    <title>编辑任务 - Vanity</title>

            --bg-primary: #0f0f23;

            --bg-secondary: #1a1a2e;    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">

            --bg-card: #16213e;

            --bg-sidebar: #0f0f23;    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

            --text-primary: #ffffff;

            --text-secondary: #a0a0a0;    <style>    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

            --text-muted: #6b7280;

            --accent: #3b82f6;        :root {    <style>

            --accent-light: #60a5fa;

            --border: #334155;            /* 深色主题 */        :root {

            --success: #10b981;

            --warning: #f59e0b;            --bg-primary: #0f0f23;            --primary-dark: #1a1a1a;

            --danger: #ef4444;

            --shadow: rgba(0, 0, 0, 0.3);            --bg-secondary: #1a1a2e;            --secondary-dark: #2d2d2d;

            --blur-bg: rgba(22, 33, 62, 0.8);

        }            --bg-card: #16213e;            --accent-color: #4361ee;



        [data-theme="light"] {            --bg-sidebar: #0f0f23;            --text-primary: #e0e0e0;

            /* 浅色主题 */

            --bg-primary: #ffffff;            --text-primary: #ffffff;            --text-secondary: #b0b0b0;

            --bg-secondary: #f8fafc;

            --bg-card: #ffffff;            --text-secondary: #a0a0a0;            --success-color: #4ade80;

            --bg-sidebar: #f1f5f9;

            --text-primary: #1f2937;            --text-muted: #6b7280;            --warning-color: #facc15;

            --text-secondary: #4b5563;

            --text-muted: #9ca3af;            --accent: #3b82f6;            --danger-color: #f87171;

            --accent: #3b82f6;

            --accent-light: #60a5fa;            --accent-light: #60a5fa;            --border-color: #444;

            --border: #e2e8f0;

            --success: #10b981;            --border: #334155;        }

            --warning: #f59e0b;

            --danger: #ef4444;            --success: #10b981;        

            --shadow: rgba(0, 0, 0, 0.1);

            --blur-bg: rgba(248, 250, 252, 0.9);            --warning: #f59e0b;        body {

        }

            --danger: #ef4444;            background-color: var(--primary-dark);

        * {

            margin: 0;            --shadow: rgba(0, 0, 0, 0.3);            color: var(--text-primary);

            padding: 0;

            box-sizing: border-box;            --blur-bg: rgba(22, 33, 62, 0.8);            font-family: 'Roboto', sans-serif;

        }

        }            min-height: 100vh;

        body {

            background: var(--bg-primary);        }

            color: var(--text-primary);

            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;        [data-theme="light"] {        

            line-height: 1.6;

            transition: all 0.3s ease;            /* 浅色主题 */        .navbar {

        }

            --bg-primary: #ffffff;            background-color: var(--secondary-dark);

        .theme-toggle {

            position: fixed;            --bg-secondary: #f8fafc;            border-bottom: 1px solid var(--border-color);

            top: 20px;

            right: 20px;            --bg-card: #ffffff;        }

            z-index: 1000;

            background: var(--bg-card);            --bg-sidebar: #f1f5f9;        

            border: 1px solid var(--border);

            border-radius: 50px;            --text-primary: #1f2937;        .sidebar {

            padding: 8px;

            cursor: pointer;            --text-secondary: #4b5563;            background-color: var(--secondary-dark);

            transition: all 0.3s ease;

            box-shadow: 0 4px 20px var(--shadow);            --text-muted: #9ca3af;            height: 100vh;

        }

            --accent: #3b82f6;            position: fixed;

        .theme-toggle:hover {

            transform: scale(1.1);            --accent-light: #60a5fa;            border-right: 1px solid var(--border-color);

            box-shadow: 0 6px 30px var(--shadow);

        }            --border: #e2e8f0;        }



        .theme-toggle i {            --success: #10b981;        

            font-size: 1.2rem;

            padding: 8px;            --warning: #f59e0b;        .sidebar .nav-link {

            border-radius: 50%;

            transition: all 0.3s ease;            --danger: #ef4444;            color: var(--text-secondary);

        }

            --shadow: rgba(0, 0, 0, 0.1);            border-radius: 5px;

        .theme-toggle .sun {

            color: var(--warning);            --blur-bg: rgba(248, 250, 252, 0.9);            margin: 5px 0;

            opacity: 0;

            transform: rotate(180deg);        }        }

        }

        

        .theme-toggle .moon {

            color: var(--accent);        * {        .sidebar .nav-link:hover, .sidebar .nav-link.active {

            opacity: 1;

            transform: rotate(0deg);            margin: 0;            background-color: var(--accent-color);

        }

            padding: 0;            color: white;

        [data-theme="light"] .theme-toggle .sun {

            opacity: 1;            box-sizing: border-box;        }

            transform: rotate(0deg);

        }        }        



        [data-theme="light"] .theme-toggle .moon {        .main-content {

            opacity: 0;

            transform: rotate(-180deg);        body {            margin-left: 250px;

        }

            background: var(--bg-primary);            padding: 20px;

        .sidebar {

            position: fixed;            color: var(--text-primary);        }

            left: 0;

            top: 0;            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;        

            width: 280px;

            height: 100vh;            line-height: 1.6;        .card {

            background: var(--bg-sidebar);

            border-right: 1px solid var(--border);            transition: all 0.3s ease;            background-color: var(--secondary-dark);

            z-index: 100;

            overflow-y: auto;        }            border: 1px solid var(--border-color);

            transition: all 0.3s ease;

        }            border-radius: 10px;



        .sidebar-header {        .theme-toggle {            margin-bottom: 20px;

            padding: 2rem 1.5rem 1.5rem;

            border-bottom: 1px solid var(--border);            position: fixed;        }

        }

            top: 20px;        

        .logo {

            font-size: 1.8rem;            right: 20px;        .card-header {

            font-weight: 700;

            background: linear-gradient(135deg, var(--accent), var(--accent-light));            z-index: 1000;            background-color: rgba(255, 255, 255, 0.03);

            -webkit-background-clip: text;

            -webkit-text-fill-color: transparent;            background: var(--bg-card);            border-bottom: 1px solid var(--border-color);

            background-clip: text;

        }            border: 1px solid var(--border);            font-weight: 500;



        .nav-menu {            border-radius: 50px;        }

            padding: 1.5rem 0;

        }            padding: 8px;        



        .nav-item {            cursor: pointer;        .btn-primary {

            margin: 0.5rem 1rem;

        }            transition: all 0.3s ease;            background-color: var(--accent-color);



        .nav-link {            box-shadow: 0 4px 20px var(--shadow);            border-color: var(--accent-color);

            display: flex;

            align-items: center;        }        }

            gap: 1rem;

            padding: 1rem;        

            color: var(--text-secondary);

            text-decoration: none;        .theme-toggle:hover {        .btn-primary:hover {

            border-radius: 12px;

            transition: all 0.3s ease;            transform: scale(1.1);            background-color: #3651d4;

            position: relative;

            overflow: hidden;            box-shadow: 0 6px 30px var(--shadow);            border-color: #3651d4;

        }

        }        }

        .nav-link:hover, .nav-link.active {

            background: var(--accent);        

            color: white;

            transform: translateX(8px);        .theme-toggle i {        .btn-outline-light {

            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);

        }            font-size: 1.2rem;            color: var(--text-primary);



        .nav-link::before {            padding: 8px;            border-color: var(--border-color);

            content: '';

            position: absolute;            border-radius: 50%;        }

            top: 0;

            left: -100%;            transition: all 0.3s ease;        

            width: 100%;

            height: 100%;        }        .btn-outline-light:hover {

            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);

            transition: 0.6s;            background-color: var(--secondary-dark);

        }

        .theme-toggle .sun {            color: white;

        .nav-link:hover::before {

            left: 100%;            color: var(--warning);        }

        }

            opacity: 0;        

        .main-content {

            margin-left: 280px;            transform: rotate(180deg);        .form-control, .form-control:focus {

            min-height: 100vh;

            background: var(--bg-secondary);        }            background-color: var(--secondary-dark);

        }

            border: 1px solid var(--border-color);

        .header {

            background: var(--blur-bg);        .theme-toggle .moon {            color: var(--text-primary);

            backdrop-filter: blur(20px);

            border-bottom: 1px solid var(--border);            color: var(--accent);        }

            padding: 1.5rem 2rem;

            position: sticky;            opacity: 1;        

            top: 0;

            z-index: 50;            transform: rotate(0deg);        .form-control:focus {

        }

        }            border-color: var(--accent-color);

        .header-content {

            display: flex;            box-shadow: 0 0 0 0.2rem rgba(67, 97, 238, 0.25);

            justify-content: space-between;

            align-items: center;        [data-theme="light"] .theme-toggle .sun {        }

        }

            opacity: 1;        

        .page-title {

            font-size: 2rem;            transform: rotate(0deg);        .form-control::placeholder {

            font-weight: 700;

            background: linear-gradient(135deg, var(--accent), var(--accent-light));        }            color: var(--text-secondary);

            -webkit-background-clip: text;

            -webkit-text-fill-color: transparent;        }

            background-clip: text;

        }        [data-theme="light"] .theme-toggle .moon {        



        .breadcrumb {            opacity: 0;        .form-select {

            display: flex;

            align-items: center;            transform: rotate(-180deg);            background-color: var(--secondary-dark);

            gap: 0.5rem;

            color: var(--text-secondary);        }            border: 1px solid var(--border-color);

            font-size: 0.9rem;

        }            color: var(--text-primary);



        .breadcrumb a {        .sidebar {        }

            color: var(--accent);

            text-decoration: none;            position: fixed;    </style>

        }

            left: 0;</head>

        .breadcrumb a:hover {

            text-decoration: underline;            top: 0;<body>

        }

            width: 280px;    <nav class="navbar navbar-expand-lg navbar-dark">

        .content-area {

            padding: 2rem;            height: 100vh;        <a class="navbar-brand" href="{% url 'content_generator:task_list' %}">

            max-width: 800px;

            margin: 0 auto;            background: var(--bg-sidebar);            <i class="fas fa-moon me-2"></i>Vanity

        }

            border-right: 1px solid var(--border);        </a>

        .form-card {

            background: var(--bg-card);            z-index: 100;        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">

            border: 1px solid var(--border);

            border-radius: 16px;            overflow-y: auto;            <span class="navbar-toggler-icon"></span>

            padding: 2rem;

            box-shadow: 0 4px 20px var(--shadow);            transition: all 0.3s ease;        </button>

            transition: all 0.3s ease;

        }        }        <div class="collapse navbar-collapse" id="navbarNav">



        .form-card:hover {            <ul class="navbar-nav ml-auto">

            box-shadow: 0 8px 30px var(--shadow);

        }        .sidebar-header {                <li class="nav-item">



        .form-group {            padding: 2rem 1.5rem 1.5rem;                    <a class="nav-link" href="#">

            margin-bottom: 1.5rem;

        }            border-bottom: 1px solid var(--border);                        <i class="fas fa-user me-1"></i> {{ user.username }}



        .form-label {        }                    </a>

            display: block;

            margin-bottom: 0.5rem;                </li>

            font-weight: 500;

            color: var(--text-primary);        .logo {            </ul>

        }

            font-size: 1.8rem;        </div>

        .form-control {

            width: 100%;            font-weight: 700;    </nav>

            padding: 0.75rem 1rem;

            border: 1px solid var(--border);            background: linear-gradient(135deg, var(--accent), var(--accent-light));    

            border-radius: 8px;

            background: var(--bg-primary);            -webkit-background-clip: text;    <div class="container-fluid">

            color: var(--text-primary);

            font-size: 1rem;            -webkit-text-fill-color: transparent;        <div class="row">

            transition: all 0.3s ease;

        }            background-clip: text;            <!-- 侧边栏 -->



        .form-control:focus {        }            <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">

            outline: none;

            border-color: var(--accent);                <div class="position-sticky pt-3">

            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);

        }        .nav-menu {                    <ul class="nav flex-column">



        .form-control:hover {            padding: 1.5rem 0;                        <li class="nav-item">

            border-color: var(--accent-light);

        }        }                            <a class="nav-link active" href="{% url 'content_generator:task_list' %}">



        .emoji-selector {                                <i class="fas fa-tasks me-2"></i>任务管理

            display: grid;

            grid-template-columns: repeat(5, 1fr);        .nav-item {                            </a>

            gap: 0.5rem;

            margin-top: 0.5rem;            margin: 0.5rem 1rem;                        </li>

        }

        }                        <li class="nav-item">

        .emoji-option {

            display: flex;                            <a class="nav-link" href="{% url 'content_generator:event_list' %}">

            align-items: center;

            justify-content: center;        .nav-link {                                <i class="fas fa-calendar-alt me-2"></i>事件记录

            padding: 0.75rem;

            border: 1px solid var(--border);            display: flex;                            </a>

            border-radius: 8px;

            cursor: pointer;            align-items: center;                        </li>

            transition: all 0.3s ease;

            font-size: 1.5rem;            gap: 1rem;                        <li class="nav-item">

            background: var(--bg-primary);

        }            padding: 1rem;                            <a class="nav-link" href="{% url 'content_generator:daily_summary' %}">



        .emoji-option:hover {            color: var(--text-secondary);                                <i class="fas fa-chart-line me-2"></i>日总结

            border-color: var(--accent);

            background: var(--accent);            text-decoration: none;                            </a>

            transform: scale(1.1);

        }            border-radius: 12px;                        </li>



        .emoji-option.selected {            transition: all 0.3s ease;                    </ul>

            border-color: var(--accent);

            background: var(--accent);            position: relative;                </div>

            color: white;

        }            overflow: hidden;            </nav>



        .priority-selector {        }            

            display: grid;

            grid-template-columns: repeat(3, 1fr);            <!-- 主内容区 -->

            gap: 0.5rem;

            margin-top: 0.5rem;        .nav-link:hover, .nav-link.active {            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">

        }

            background: var(--accent);                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">

        .priority-option {

            display: flex;            color: white;                    <h1 class="h2">编辑任务</h1>

            align-items: center;

            justify-content: center;            transform: translateX(8px);                </div>

            padding: 0.75rem;

            border: 1px solid var(--border);            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);                

            border-radius: 8px;

            cursor: pointer;        }                {% if messages %}

            transition: all 0.3s ease;

            font-size: 1.2rem;                    {% for message in messages %}

            background: var(--bg-primary);

        }        .nav-link::before {                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">



        .priority-option:hover {            content: '';                        {{ message }}

            border-color: var(--accent);

            background: var(--accent);            position: absolute;                        <button type="button" class="btn-close" data-dismiss="alert" aria-label="Close"></button>

            transform: scale(1.05);

        }            top: 0;                    </div>



        .priority-option.selected {            left: -100%;                    {% endfor %}

            border-color: var(--accent);

            background: var(--accent);            width: 100%;                {% endif %}

            color: white;

        }            height: 100%;                



        .btn {            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);                <div class="card">

            display: inline-flex;

            align-items: center;            transition: 0.6s;                    <div class="card-header">

            gap: 0.5rem;

            padding: 0.75rem 1.5rem;        }                        <i class="fas fa-edit me-2"></i>编辑任务

            border: none;

            border-radius: 8px;                    </div>

            font-weight: 500;

            text-decoration: none;        .nav-link:hover::before {                    <div class="card-body">

            cursor: pointer;

            transition: all 0.3s ease;            left: 100%;                        <form method="post">

            font-size: 1rem;

        }        }                            {% csrf_token %}



        .btn-primary {                            

            background: linear-gradient(135deg, var(--accent), var(--accent-light));

            color: white;        .main-content {                            <div class="mb-3">

            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);

        }            margin-left: 280px;                                <label for="{{ form.title.id_for_label }}" class="form-label">任务标题 *</label>



        .btn-primary:hover {            min-height: 100vh;                                {{ form.title }}

            transform: translateY(-2px);

            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);            background: var(--bg-secondary);                                {% if form.title.errors %}

        }

        }                                    <div class="text-danger">{{ form.title.errors }}</div>

        .btn-secondary {

            background: transparent;                                {% endif %}

            border: 1px solid var(--border);

            color: var(--text-primary);        .header {                            </div>

        }

            background: var(--blur-bg);                            

        .btn-secondary:hover {

            background: var(--bg-card);            backdrop-filter: blur(20px);                            <div class="mb-3">

            transform: translateY(-2px);

        }            border-bottom: 1px solid var(--border);                                <label for="{{ form.description.id_for_label }}" class="form-label">任务描述</label>



        .btn-danger {            padding: 1.5rem 2rem;                                {{ form.description }}

            background: var(--danger);

            color: white;            position: sticky;                                {% if form.description.errors %}

        }

            top: 0;                                    <div class="text-danger">{{ form.description.errors }}</div>

        .btn-danger:hover {

            background: #dc2626;            z-index: 50;                                {% endif %}

            transform: translateY(-2px);

        }        }                            </div>



        .form-actions {                            

            display: flex;

            gap: 1rem;        .header-content {                            <div class="row">

            margin-top: 2rem;

            justify-content: flex-end;            display: flex;                                <div class="col-md-6 mb-3">

        }

            justify-content: space-between;                                    <label for="{{ form.priority.id_for_label }}" class="form-label">优先级</label>

        .danger-zone {

            margin-top: 3rem;            align-items: center;                                    {{ form.priority }}

            padding: 1.5rem;

            border: 1px solid var(--danger);        }                                    {% if form.priority.errors %}

            border-radius: 8px;

            background: rgba(239, 68, 68, 0.05);                                        <div class="text-danger">{{ form.priority.errors }}</div>

        }

        .page-title {                                    {% endif %}

        .danger-zone h3 {

            color: var(--danger);            font-size: 2rem;                                </div>

            margin-bottom: 1rem;

            font-size: 1.1rem;            font-weight: 700;                                

        }

            background: linear-gradient(135deg, var(--accent), var(--accent-light));                                <div class="col-md-6 mb-3">

        .fade-in {

            animation: fadeIn 0.5s ease-in-out;            -webkit-background-clip: text;                                    <label for="{{ form.willingness.id_for_label }}" class="form-label">意愿度</label>

        }

            -webkit-text-fill-color: transparent;                                    {{ form.willingness }}

        @keyframes fadeIn {

            from { opacity: 0; transform: translateY(20px); }            background-clip: text;                                    {% if form.willingness.errors %}

            to { opacity: 1; transform: translateY(0); }

        }        }                                        <div class="text-danger">{{ form.willingness.errors }}</div>



        .bounce {                                    {% endif %}

            animation: bounce 0.6s ease-in-out;

        }        .breadcrumb {                                </div>



        @keyframes bounce {            display: flex;                            </div>

            0%, 20%, 60%, 100% { transform: translateY(0); }

            40% { transform: translateY(-10px); }            align-items: center;                            

            80% { transform: translateY(-5px); }

        }            gap: 0.5rem;                            <div class="mb-3">



        /* Responsive Design */            color: var(--text-secondary);                                <label for="{{ form.due_date.id_for_label }}" class="form-label">截止时间</label>

        @media (max-width: 768px) {

            .sidebar {            font-size: 0.9rem;                                {{ form.due_date }}

                transform: translateX(-100%);

            }        }                                {% if form.due_date.errors %}



            .main-content {                                    <div class="text-danger">{{ form.due_date.errors }}</div>

                margin-left: 0;

            }        .breadcrumb a {                                {% endif %}



            .content-area {            color: var(--accent);                            </div>

                padding: 1rem;

            }            text-decoration: none;                            

        }

    </style>        }                            <div class="d-flex justify-content-between">

</head>

<body class="fade-in">                                <a href="{% url 'content_generator:task_list' %}" class="btn btn-outline-light">

    <!-- Theme Toggle -->

    <div class="theme-toggle" onclick="toggleTheme()">        .breadcrumb a:hover {                                    <i class="fas fa-arrow-left me-1"></i>返回

        <i class="fas fa-sun sun"></i>

        <i class="fas fa-moon moon"></i>            text-decoration: underline;                                </a>

    </div>

        }                                <button type="submit" class="btn btn-primary">

    <!-- Sidebar -->

    <nav class="sidebar">                                    <i class="fas fa-save me-1"></i>更新任务

        <div class="sidebar-header">

            <div class="logo">Vanity</div>        .content-area {                                </button>

        </div>

        <div class="nav-menu">            padding: 2rem;                            </div>

            <div class="nav-item">

                <a href="{% url 'content_generator:task_list' %}" class="nav-link active">            max-width: 800px;                        </form>

                    <i class="fas fa-tasks"></i>

                    <span>任务管理</span>            margin: 0 auto;                    </div>

                </a>

            </div>        }                </div>

            <div class="nav-item">

                <a href="{% url 'content_generator:event_list' %}" class="nav-link">            </main>

                    <i class="fas fa-book"></i>

                    <span>日记</span>        .form-card {        </div>

                </a>

            </div>            background: var(--bg-card);    </div>

            <div class="nav-item">

                <a href="{% url 'content_generator:daily_summary' %}" class="nav-link">            border: 1px solid var(--border);    

                    <i class="fas fa-chart-line"></i>

                    <span>日总结</span>            border-radius: 16px;    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

                </a>

            </div>            padding: 2rem;    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>

            <div class="nav-item">

                <a href="{% url 'logout' %}" class="nav-link">            box-shadow: 0 4px 20px var(--shadow);    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

                    <i class="fas fa-sign-out-alt"></i>

                    <span>退出登录</span>            transition: all 0.3s ease;</body>

                </a>

            </div>        }</html>

        </div>

    </nav>        .form-card:hover {

            box-shadow: 0 8px 30px var(--shadow);

    <!-- Main Content -->        }

    <main class="main-content">

        <!-- Header -->        .form-group {

        <header class="header">            margin-bottom: 1.5rem;

            <div class="header-content">        }

                <div>

                    <h1 class="page-title">编辑任务</h1>        .form-label {

                    <div class="breadcrumb">            display: block;

                        <a href="{% url 'content_generator:task_list' %}">任务管理</a>            margin-bottom: 0.5rem;

                        <i class="fas fa-chevron-right"></i>            font-weight: 500;

                        <span>编辑任务</span>            color: var(--text-primary);

                    </div>        }

                </div>

            </div>        .form-control {

        </header>            width: 100%;

            padding: 0.75rem 1rem;

        <!-- Content Area -->            border: 1px solid var(--border);

        <div class="content-area">            border-radius: 8px;

            <div class="form-card">            background: var(--bg-primary);

                <form method="post" id="taskForm">            color: var(--text-primary);

                    {% csrf_token %}            font-size: 1rem;

                                transition: all 0.3s ease;

                    <div class="form-group">        }

                        <label class="form-label" for="id_title">

                            <i class="fas fa-tag"></i> 任务标题        .form-control:focus {

                        </label>            outline: none;

                        <input type="text" name="title" id="id_title" class="form-control"             border-color: var(--accent);

                               value="{{ form.title.value|default:'' }}" placeholder="输入任务标题..." required>            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);

                    </div>        }



                    <div class="form-group">        .form-control:hover {

                        <label class="form-label" for="id_description">            border-color: var(--accent-light);

                            <i class="fas fa-align-left"></i> 任务描述        }

                        </label>

                        <textarea name="description" id="id_description" class="form-control"         .emoji-selector {

                                  rows="4" placeholder="描述任务详情（可选）...">{{ form.description.value|default:'' }}</textarea>            display: grid;

                    </div>            grid-template-columns: repeat(5, 1fr);

            gap: 0.5rem;

                    <div class="form-group">            margin-top: 0.5rem;

                        <label class="form-label">        }

                            <i class="fas fa-flag"></i> 优先级

                        </label>        .emoji-option {

                        <div class="priority-selector">            display: flex;

                            <div class="priority-option {% if task.priority == 'low' %}selected{% endif %}" data-value="low" title="低优先级">            align-items: center;

                                ♛            justify-content: center;

                            </div>            padding: 0.75rem;

                            <div class="priority-option {% if task.priority == 'medium' %}selected{% endif %}" data-value="medium" title="中优先级">            border: 1px solid var(--border);

                                ♛♛            border-radius: 8px;

                            </div>            cursor: pointer;

                            <div class="priority-option {% if task.priority == 'high' %}selected{% endif %}" data-value="high" title="高优先级">            transition: all 0.3s ease;

                                ♛♛♛            font-size: 1.5rem;

                            </div>            background: var(--bg-primary);

                        </div>        }

                        <input type="hidden" name="priority" id="id_priority" value="{{ task.priority }}">

                    </div>        .emoji-option:hover {

            border-color: var(--accent);

                    <div class="form-group">            background: var(--accent);

                        <label class="form-label">            transform: scale(1.1);

                            <i class="fas fa-smile"></i> 意愿度        }

                        </label>

                        <div class="emoji-selector">        .emoji-option.selected {

                            <div class="emoji-option {% if task.willingness == '😭' %}selected{% endif %}" data-value="😭" title="很不情愿">😭</div>            border-color: var(--accent);

                            <div class="emoji-option {% if task.willingness == '😕' %}selected{% endif %}" data-value="😕" title="不太情愿">😕</div>            background: var(--accent);

                            <div class="emoji-option {% if task.willingness == '😐' %}selected{% endif %}" data-value="😐" title="一般">😐</div>            color: white;

                            <div class="emoji-option {% if task.willingness == '🙂' %}selected{% endif %}" data-value="🙂" title="比较愿意">🙂</div>        }

                            <div class="emoji-option {% if task.willingness == '😄' %}selected{% endif %}" data-value="😄" title="很愿意">😄</div>

                        </div>        .priority-selector {

                        <input type="hidden" name="willingness" id="id_willingness" value="{{ task.willingness }}">            display: grid;

                    </div>            grid-template-columns: repeat(3, 1fr);

            gap: 0.5rem;

                    <div class="form-group">            margin-top: 0.5rem;

                        <label class="form-label" for="id_due_date">        }

                            <i class="fas fa-clock"></i> 截止时间（可选）

                        </label>        .priority-option {

                        <input type="datetime-local" name="due_date" id="id_due_date" class="form-control"             display: flex;

                               value="{% if task.due_date %}{{ task.due_date|date:'Y-m-d\TH:i' }}{% endif %}">            align-items: center;

                    </div>            justify-content: center;

            padding: 0.75rem;

                    <div class="form-actions">            border: 1px solid var(--border);

                        <a href="{% url 'content_generator:task_list' %}" class="btn btn-secondary">            border-radius: 8px;

                            <i class="fas fa-times"></i>            cursor: pointer;

                            取消            transition: all 0.3s ease;

                        </a>            font-size: 1.2rem;

                        <button type="submit" class="btn btn-primary">            background: var(--bg-primary);

                            <i class="fas fa-save"></i>        }

                            保存更改

                        </button>        .priority-option:hover {

                    </div>            border-color: var(--accent);

                </form>            background: var(--accent);

            transform: scale(1.05);

                <!-- Danger Zone -->        }

                <div class="danger-zone">

                    <h3><i class="fas fa-exclamation-triangle"></i> 危险操作</h3>        .priority-option.selected {

                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">            border-color: var(--accent);

                        删除任务是不可逆的操作，请谨慎操作。            background: var(--accent);

                    </p>            color: white;

                    <button class="btn btn-danger" onclick="confirmDelete()">        }

                        <i class="fas fa-trash"></i>

                        删除任务        .btn {

                    </button>            display: inline-flex;

                </div>            align-items: center;

            </div>            gap: 0.5rem;

        </div>            padding: 0.75rem 1.5rem;

    </main>            border: none;

            border-radius: 8px;

    <script>            font-weight: 500;

        // Theme Toggle            text-decoration: none;

        function toggleTheme() {            cursor: pointer;

            const body = document.body;            transition: all 0.3s ease;

            const currentTheme = body.getAttribute('data-theme');            font-size: 1rem;

            const newTheme = currentTheme === 'light' ? 'dark' : 'light';        }

            

            body.setAttribute('data-theme', newTheme);        .btn-primary {

            localStorage.setItem('theme', newTheme);            background: linear-gradient(135deg, var(--accent), var(--accent-light));

                        color: white;

            // Add bounce animation to toggle button            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);

            document.querySelector('.theme-toggle').classList.add('bounce');        }

            setTimeout(() => {

                document.querySelector('.theme-toggle').classList.remove('bounce');        .btn-primary:hover {

            }, 600);            transform: translateY(-2px);

        }            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);

        }

        // Load saved theme

        document.addEventListener('DOMContentLoaded', function() {        .btn-secondary {

            const savedTheme = localStorage.getItem('theme') || 'dark';            background: transparent;

            document.body.setAttribute('data-theme', savedTheme);            border: 1px solid var(--border);

        });            color: var(--text-primary);

        }

        // Priority Selector

        document.querySelectorAll('.priority-option').forEach(option => {        .btn-secondary:hover {

            option.addEventListener('click', function() {            background: var(--bg-card);

                document.querySelectorAll('.priority-option').forEach(opt => opt.classList.remove('selected'));            transform: translateY(-2px);

                this.classList.add('selected');        }

                document.getElementById('id_priority').value = this.getAttribute('data-value');

                        .btn-danger {

                // Add bounce animation            background: var(--danger);

                this.classList.add('bounce');            color: white;

                setTimeout(() => this.classList.remove('bounce'), 600);        }

            });

        });        .btn-danger:hover {

            background: #dc2626;

        // Emoji Selector            transform: translateY(-2px);

        document.querySelectorAll('.emoji-option').forEach(option => {        }

            option.addEventListener('click', function() {

                document.querySelectorAll('.emoji-option').forEach(opt => opt.classList.remove('selected'));        .form-actions {

                this.classList.add('selected');            display: flex;

                document.getElementById('id_willingness').value = this.getAttribute('data-value');            gap: 1rem;

                            margin-top: 2rem;

                // Add bounce animation            justify-content: flex-end;

                this.classList.add('bounce');        }

                setTimeout(() => this.classList.remove('bounce'), 600);

            });        .danger-zone {

        });            margin-top: 3rem;

            padding: 1.5rem;

        // Form validation with animation            border: 1px solid var(--danger);

        document.getElementById('taskForm').addEventListener('submit', function(e) {            border-radius: 8px;

            const title = document.getElementById('id_title').value.trim();            background: rgba(239, 68, 68, 0.05);

            if (!title) {        }

                e.preventDefault();

                const titleField = document.getElementById('id_title');        .danger-zone h3 {

                titleField.focus();            color: var(--danger);

                titleField.style.borderColor = 'var(--danger)';            margin-bottom: 1rem;

                titleField.classList.add('bounce');            font-size: 1.1rem;

                setTimeout(() => {        }

                    titleField.style.borderColor = '';

                    titleField.classList.remove('bounce');        .fade-in {

                }, 1000);            animation: fadeIn 0.5s ease-in-out;

            }        }

        });

        @keyframes fadeIn {

        // Delete confirmation            from { opacity: 0; transform: translateY(20px); }

        function confirmDelete() {            to { opacity: 1; transform: translateY(0); }

            if (confirm('确定要删除这个任务吗？此操作不可撤销。')) {        }

                fetch('{% url "content_generator:delete_task" task.id %}', {

                    method: 'POST',        .bounce {

                    headers: {            animation: bounce 0.6s ease-in-out;

                        'X-CSRFToken': getCookie('csrftoken')        }

                    }

                })        @keyframes bounce {

                .then(response => {            0%, 20%, 60%, 100% { transform: translateY(0); }

                    if (response.ok) {            40% { transform: translateY(-10px); }

                        window.location.href = '{% url "content_generator:task_list" %}';            80% { transform: translateY(-5px); }

                    }        }

                });

            }        /* Responsive Design */

        }        @media (max-width: 768px) {

            .sidebar {

        // Get CSRF token                transform: translateX(-100%);

        function getCookie(name) {            }

            let cookieValue = null;

            if (document.cookie && document.cookie !== '') {            .main-content {

                const cookies = document.cookie.split(';');                margin-left: 0;

                for (let i = 0; i < cookies.length; i++) {            }

                    const cookie = cookies[i].trim();

                    if (cookie.substring(0, name.length + 1) === (name + '=')) {            .content-area {

                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));                padding: 1rem;

                        break;            }

                    }        }

                }    </style>

            }</head>

            return cookieValue;<body class="fade-in">

        }    <!-- Theme Toggle -->

    <div class="theme-toggle" onclick="toggleTheme()">

        // Add focus animations        <i class="fas fa-sun sun"></i>

        document.querySelectorAll('.form-control').forEach(field => {        <i class="fas fa-moon moon"></i>

            field.addEventListener('focus', function() {    </div>

                this.parentElement.style.transform = 'scale(1.02)';

            });    <!-- Sidebar -->

                <nav class="sidebar">

            field.addEventListener('blur', function() {        <div class="sidebar-header">

                this.parentElement.style.transform = 'scale(1)';            <div class="logo">Vanity</div>

            });        </div>

        });        <div class="nav-menu">

    </script>            <div class="nav-item">

</body>                <a href="{% url 'content_generator:task_list' %}" class="nav-link active">

</html>                    <i class="fas fa-tasks"></i>
                    <span>任务管理</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="{% url 'content_generator:event_list' %}" class="nav-link">
                    <i class="fas fa-calendar"></i>
                    <span>事件记录</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="{% url 'content_generator:daily_summary' %}" class="nav-link">
                    <i class="fas fa-chart-line"></i>
                    <span>日总结</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="{% url 'logout' %}" class="nav-link">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>退出登录</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div>
                    <h1 class="page-title">编辑任务</h1>
                    <div class="breadcrumb">
                        <a href="{% url 'content_generator:task_list' %}">任务管理</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>编辑任务</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <div class="content-area">
            <div class="form-card">
                <form method="post" id="taskForm">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label class="form-label" for="id_title">
                            <i class="fas fa-tag"></i> 任务标题
                        </label>
                        <input type="text" name="title" id="id_title" class="form-control" 
                               value="{{ form.title.value|default:'' }}" placeholder="输入任务标题..." required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="id_description">
                            <i class="fas fa-align-left"></i> 任务描述
                        </label>
                        <textarea name="description" id="id_description" class="form-control" 
                                  rows="4" placeholder="描述任务详情（可选）...">{{ form.description.value|default:'' }}</textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-flag"></i> 优先级
                        </label>
                        <div class="priority-selector">
                            <div class="priority-option {% if task.priority == 'low' %}selected{% endif %}" data-value="low" title="低优先级">
                                ♛
                            </div>
                            <div class="priority-option {% if task.priority == 'medium' %}selected{% endif %}" data-value="medium" title="中优先级">
                                ♛♛
                            </div>
                            <div class="priority-option {% if task.priority == 'high' %}selected{% endif %}" data-value="high" title="高优先级">
                                ♛♛♛
                            </div>
                        </div>
                        <input type="hidden" name="priority" id="id_priority" value="{{ task.priority }}">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-smile"></i> 意愿度
                        </label>
                        <div class="emoji-selector">
                            <div class="emoji-option {% if task.willingness == '😭' %}selected{% endif %}" data-value="😭" title="很不情愿">😭</div>
                            <div class="emoji-option {% if task.willingness == '😕' %}selected{% endif %}" data-value="😕" title="不太情愿">😕</div>
                            <div class="emoji-option {% if task.willingness == '😐' %}selected{% endif %}" data-value="😐" title="一般">😐</div>
                            <div class="emoji-option {% if task.willingness == '🙂' %}selected{% endif %}" data-value="🙂" title="比较愿意">🙂</div>
                            <div class="emoji-option {% if task.willingness == '😄' %}selected{% endif %}" data-value="😄" title="很愿意">😄</div>
                        </div>
                        <input type="hidden" name="willingness" id="id_willingness" value="{{ task.willingness }}">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="id_due_date">
                            <i class="fas fa-clock"></i> 截止时间（可选）
                        </label>
                        <input type="datetime-local" name="due_date" id="id_due_date" class="form-control" 
                               value="{% if task.due_date %}{{ task.due_date|date:'Y-m-d\TH:i' }}{% endif %}">
                    </div>

                    <div class="form-actions">
                        <a href="{% url 'content_generator:task_list' %}" class="btn btn-secondary">
                            <i class="fas fa-times"></i>
                            取消
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            保存更改
                        </button>
                    </div>
                </form>

                <!-- Danger Zone -->
                <div class="danger-zone">
                    <h3><i class="fas fa-exclamation-triangle"></i> 危险操作</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        删除任务是不可逆的操作，请谨慎操作。
                    </p>
                    <button class="btn btn-danger" onclick="confirmDelete()">
                        <i class="fas fa-trash"></i>
                        删除任务
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Theme Toggle
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Add bounce animation to toggle button
            document.querySelector('.theme-toggle').classList.add('bounce');
            setTimeout(() => {
                document.querySelector('.theme-toggle').classList.remove('bounce');
            }, 600);
        }

        // Load saved theme
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.body.setAttribute('data-theme', savedTheme);
        });

        // Priority Selector
        document.querySelectorAll('.priority-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.priority-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                document.getElementById('id_priority').value = this.getAttribute('data-value');
                
                // Add bounce animation
                this.classList.add('bounce');
                setTimeout(() => this.classList.remove('bounce'), 600);
            });
        });

        // Emoji Selector
        document.querySelectorAll('.emoji-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.emoji-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                document.getElementById('id_willingness').value = this.getAttribute('data-value');
                
                // Add bounce animation
                this.classList.add('bounce');
                setTimeout(() => this.classList.remove('bounce'), 600);
            });
        });

        // Form validation with animation
        document.getElementById('taskForm').addEventListener('submit', function(e) {
            const title = document.getElementById('id_title').value.trim();
            if (!title) {
                e.preventDefault();
                const titleField = document.getElementById('id_title');
                titleField.focus();
                titleField.style.borderColor = 'var(--danger)';
                titleField.classList.add('bounce');
                setTimeout(() => {
                    titleField.style.borderColor = '';
                    titleField.classList.remove('bounce');
                }, 1000);
            }
        });

        // Delete confirmation
        function confirmDelete() {
            if (confirm('确定要删除这个任务吗？此操作不可撤销。')) {
                fetch('{% url "content_generator:delete_task" task.id %}', {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken')
                    }
                })
                .then(response => {
                    if (response.ok) {
                        window.location.href = '{% url "content_generator:task_list" %}';
                    }
                });
            }
        }

        // Get CSRF token
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        // Add focus animations
        document.querySelectorAll('.form-control').forEach(field => {
            field.addEventListener('focus', function() {
                this.parentElement.style.transform = 'scale(1.02)';
            });
            
            field.addEventListener('blur', function() {
                this.parentElement.style.transform = 'scale(1)';
            });
        });
    </script>
</body>
</html>